import{c as p}from"./index-9_wjpDOC.js";import{r as g}from"./remove-undefined-B_oBVupY-oajMeTFk.js";import"./main-CxkuDHIA.js";async function x(c,l){const n=p(c),e=[],{index:u="default",client:d,params:o,tag:s}=l;if(u==="crawler"){const a=await d.search({datasources:[],...o,term:c,where:{category:s?{eq:s.slice(0,1).toUpperCase()+s.slice(1)}:void 0,...o?.where},limit:10});if(!a)return e;for(const r of a.hits){const i=r.document;e.push({id:r.id,type:"page",content:n.highlightMarkdown(i.title),url:i.path},{id:"page"+r.id,type:"text",content:n.highlightMarkdown(i.content),url:i.path})}return e}const h=await d.search({datasources:[],...o,term:c,limit:10,where:g({tag:s,...o?.where}),groupBy:{properties:["page_id"],max_results:7,...o?.groupBy}});if(!h||!h.groups)return e;for(const a of h.groups){let r=!1;for(const i of a.result){const t=i.document;r||(e.push({id:t.page_id,type:"page",content:n.highlightMarkdown(t.title),breadcrumbs:t.breadcrumbs,url:t.url}),r=!0),e.push({id:t.id,content:n.highlightMarkdown(t.content),type:t.content===t.section?"heading":"text",url:t.section_id?`${t.url}#${t.section_id}`:t.url})}}return e.length>80?e.slice(0,80):e}export{x as searchDocs};
